<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹ Ùˆ Ø²ÛŒØ¨Ø§ÛŒÛŒâ€ŒØ´Ù†Ø§Ø®ØªÛŒ BMI</title>
    <style>
        /* ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ØµÙ„ÛŒ Ùˆ ÙÙˆÙ†Øª */
        body { 
            font-family: Tahoma, sans-serif; 
            background-color: #f0f2f5; 
            padding: 15px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh;
            margin: 0;
        }

        /* Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø§ØµÙ„ÛŒ (Ú©Ø§Ø±Øª Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ/Ù…Ø¯Ø±Ù†) */
        .container { 
            background-color: white; 
            padding: 30px; 
            border-radius: 25px; /* Ú¯ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ú¯Ø±Ø¯ØªØ± */
            box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.1), -5px -5px 15px rgba(255, 255, 255, 0.9);
            width: 100%; 
            max-width: 380px; 
            text-align: center; 
            margin-bottom: 20px;
        }

        h2 { 
            color: #1a237e; /* Ø¢Ø¨ÛŒ ØªÛŒØ±Ù‡ Ø´ÛŒÚ© */
            margin-bottom: 30px; 
            padding-bottom: 10px;
            font-size: 22px;
            font-weight: 800;
            border-bottom: 3px solid #ffab40; /* Ø®Ø· Ø·Ù„Ø§ÛŒÛŒ */
        }

        /* Ú¯Ø±ÙˆÙ‡ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ */
        .input-group { 
            text-align: right; 
            margin-bottom: 18px; 
            position: relative;
        }
        
        label { 
            display: block; 
            font-size: 13px; 
            color: #444; 
            margin-bottom: 5px; 
            font-weight: 600;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ */
        input, select {
            width: 100%; 
            padding: 14px 15px 14px 40px; 
            border: none;
            border-radius: 12px; 
            box-sizing: border-box; 
            font-size: 16px; 
            background-color: #e8eaf6; /* Ø¢Ø¨ÛŒ Ù…Ù„Ø§ÛŒÙ… */
            box-shadow: inset 3px 3px 7px rgba(0, 0, 0, 0.1); 
            transition: all 0.3s;
        }
        input:focus, select:focus {
            background-color: white;
            box-shadow: 0 0 0 2px #ffab40, inset 1px 1px 3px rgba(0, 0, 0, 0.15);
            outline: none;
        }
        
        /* Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ */
        .input-icon {
            position: absolute;
            left: 10px;
            top: 40px;
            font-size: 18px;
            color: #ffab40; /* Ø·Ù„Ø§ÛŒÛŒ */
        }

        /* Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ¨Ø§ Ùˆ Ø¬Ø°Ø§Ø¨ */
        button {
            width: 100%; 
            padding: 16px; 
            background-color: #ffab40; 
            color: #1a237e; /* Ù…ØªÙ† Ø¢Ø¨ÛŒ ØªÛŒØ±Ù‡ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø·Ù„Ø§ÛŒÛŒ */
            border: none; 
            border-radius: 12px; 
            font-size: 18px; 
            cursor: pointer; 
            margin-top: 25px;
            box-shadow: 6px 6px 15px rgba(255, 171, 64, 0.5); 
            transition: all 0.3s;
            font-weight: bold;
        }
        button:active { 
            background-color: #ffa000; 
            transform: translateY(3px);
            box-shadow: 2px 2px 5px rgba(255, 171, 64, 0.8);
        }

        /* Ø¨Ø®Ø´ Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬ */
        #result { 
            margin-top: 35px; 
            text-align: right; 
            padding: 20px; 
            border-radius: 20px; 
            line-height: 1.7;
            background-color: #ffffff;
            border: 2px solid; 
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .bmi-value { 
            font-size: 36px; 
            margin-bottom: 5px; 
            font-weight: 900;
            text-align: center;
        }
        .status-message { 
            font-size: 18px; 
            font-weight: bold; 
            margin-bottom: 15px; 
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            text-align: center;
        }
        .section-title { 
            font-size: 15px; 
            font-weight: bold; 
            color: #1a237e; 
            margin-top: 20px; 
            padding-bottom: 5px;
        }
        .estimation-list { 
            list-style-type: none; 
            padding: 0; 
            margin-top: 10px; 
        }
        .estimation-list li { 
            margin-bottom: 8px; 
            font-size: 14px; 
            display: flex; 
            justify-content: space-between; 
            background-color: #f7f7f7;
            padding: 8px 12px;
            border-radius: 8px;
        }
        .explanation-text {
            font-size: 13px;
            text-align: justify;
            color: #444;
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px dashed #e0e0e0;
        }
        .disclaimer { 
            font-size: 11px; 
            color: #888; 
            margin-top: 20px; 
            text-align: justify; 
            padding-top: 10px; 
            border-top: 1px dashed #ccc; 
        }

        /* Ø§Ù…Ø¶Ø§ÛŒ Ù¾Ø§ÛŒÛŒÙ† ØµÙØ­Ù‡ */
        .signature {
            font-size: 12px;
            color: #777;
            margin-top: 15px;
            width: 100%;
            max-width: 380px;
            text-align: center;
            padding-bottom: 5px;
            font-weight: 600;
        }
        .signature a {
            color: #1a237e;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>âœ¨ ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹ ÙˆØ¶Ø¹ÛŒØª Ø¨Ø¯Ù†ÛŒ</h2>
    
    <div class="input-group">
        <label for="age">Ø³Ù†:</label>
        <input type="number" id="age" placeholder="Ù…Ø«Ù„Ø§Ù‹: 30" min="1" max="120">
        <span class="input-icon">ğŸ‚</span>
    </div>

    <div class="input-group">
        <label for="gender">Ø¬Ù†Ø³ÛŒØª:</label>
        <select id="gender">
            <option value="">--- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ ---</option>
            <option value="1">Ø¢Ù‚Ø§</option>
            <option value="0">Ø®Ø§Ù†Ù…</option>
        </select>
        <span class="input-icon">ğŸ‘¤</span>
    </div>
    
    <div class="input-group">
        <label for="weight">ÙˆØ²Ù† (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
        <input type="number" id="weight" placeholder="Ù…Ø«Ù„Ø§Ù‹: 75" min="1">
        <span class="input-icon">âš–ï¸</span>
    </div>
    
    <div class="input-group">
        <label for="height">Ù‚Ø¯ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±):</label>
        <input type="number" id="height" placeholder="Ù…Ø«Ù„Ø§Ù‹: 170" min="1">
        <span class="input-icon">ğŸ“</span>
    </div>
    
    <button onclick="calculateHealthMetrics()">ğŸ”¥ Ø´Ø±ÙˆØ¹ ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹</button>
    
    <div id="result"></div>
</div>

<div class="signature">
    ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ Ø¨Ø§ Ø§ÙØªØ®Ø§Ø± ØªÙˆØ³Ø· <a href="#">Reza Jahanshahi</a>
</div>


<script>
    // 1. ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ BMI
    function calculateBMI(weight, height) {
        const heightInMeters = height / 100;
        return (weight / (heightInMeters * heightInMeters)).toFixed(1);
    }

    // 2. ØªØ§Ø¨Ø¹ ØªØ®Ù…ÛŒÙ† Ø¯Ø±ØµØ¯ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù† (ÙØ±Ù…ÙˆÙ„ Deurenberg)
    function getBodyFatPercentage(bmi, age, gender) {
        // Gender: 1=Male (Ø¢Ù‚Ø§), 0=Female (Ø®Ø§Ù†Ù…)
        // BFP = (1.20 * BMI) + (0.23 * Age) - (10.8 * Gender) - 5.4 
        let bfp = (1.20 * parseFloat(bmi)) + (0.23 * age) - (10.8 * gender) - 5.4;
        return Math.max(0, bfp.toFixed(1));
    }

    // 3. ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø®ØªØµØ§ØµÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± ÙˆØ¶Ø¹ÛŒØª
    function generateExplanation(status, age, gender, bmi) {
        const isMale = gender === 1;
        const idealRange = age >= 20 ? "Û±Û¸.Ûµ ØªØ§ Û²Ûµ" : "ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ù†Ù…ÙˆØ¯Ø§Ø± Ø±Ø´Ø¯";

        let explanation = "";

        if (age < 2) {
            return "Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ú© Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ Ú©ÙˆØ¯Ú©Ø§Ù† Ø²ÛŒØ± Û² Ø³Ø§Ù„ Ø·Ø±Ø§Ø­ÛŒ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø³Ù†ØŒ ÙÙ‚Ø· Ù¾Ø²Ø´Ú© Ù…ØªØ®ØµØµ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ÙˆØ¶Ø¹ÛŒØª Ú©ÙˆØ¯Ú© Ø±Ø§ Ø¨Ø§ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ ØªØ®ØµØµÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†Ø¯.";
        }

        // --- Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„Ø§Ù† Ùˆ Ù†ÙˆØ¬ÙˆØ§Ù†Ø§Ù† (ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…ÙØµÙ„) ---

        if (status.message.includes("Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù†") || status.message.includes("Ø²ÛŒØ± 5 Ø¯Ø±ØµØ¯")) {
            explanation = `Ø´Ù…Ø§ Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù† Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±ÛŒØ¯. BMI Ù¾Ø§ÛŒÛŒÙ† (Ø²ÛŒØ± ${idealRange}) Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø³ÙˆØ¡ØªØºØ°ÛŒÙ‡ ÛŒØ§ Ø¹Ø¯Ù… Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§ÙÛŒ Ú©Ø§Ù„Ø±ÛŒ Ø¨Ø§Ø´Ø¯. Ø§ÛŒÙ† ÙˆØ¶Ø¹ÛŒØª Ø±ÛŒØ³Ú© Ú©Ù…Ø¨ÙˆØ¯ ÙˆÛŒØªØ§Ù…ÛŒÙ†â€ŒÙ‡Ø§ØŒ Ù¾ÙˆÚ©ÛŒ Ø§Ø³ØªØ®ÙˆØ§Ù† Ùˆ Ø¶Ø¹Ù Ø³ÛŒØ³ØªÙ… Ø§ÛŒÙ…Ù†ÛŒ Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø­ØªÙ…Ø§Ù‹ Ø¨Ø±Ø§ÛŒ Ø§ÙØ²Ø§ÛŒØ´ ÙˆØ²Ù† Ø³Ø§Ù„Ù… Ùˆ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¯Ø§Ø®Ù„ÛŒ Ø¨Ø¯Ù†ØŒ Ø¨Ø§ ÛŒÚ© Ù…ØªØ®ØµØµ ØªØºØ°ÛŒÙ‡ ÛŒØ§ Ù¾Ø²Ø´Ú© Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯. Ù‡Ø¯Ù Ø´Ù…Ø§ Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ Ù…Ø­Ø¯ÙˆØ¯Ù‡ BMI Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ (Ø¨ÛŒØ´ Ø§Ø² ${idealRange.split(" ØªØ§ ")[0]}) Ø§Ø³Øª.`;
        
        } else if (status.message.includes("ÙˆØ²Ù† Ù†Ø±Ù…Ø§Ù„") || status.message.includes("Ø³Ø§Ù„Ù…")) {
            explanation = `ØªØ¨Ø±ÛŒÚ©! Ø´Ù…Ø§ Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ ÙˆØ²Ù† Ú©Ø§Ù…Ù„Ø§Ù‹ Ø³Ø§Ù„Ù… Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±ÛŒØ¯. BMI Ø´Ù…Ø§ Ø¯Ø± Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„â€ŒØªØ±ÛŒÙ† ÙˆØ¶Ø¹ÛŒØª (${idealRange}) Ø§Ø³Øª Ú©Ù‡ Ú©Ù…ØªØ±ÛŒÙ† Ø±ÛŒØ³Ú© Ø§Ø¨ØªÙ„Ø§ Ø¨Ù‡ Ø¨ÛŒÙ…Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ ÙˆØ²Ù† Ø±Ø§ Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ø¯Ø§Ø±Ø¯. Ú©Ù„ÛŒØ¯ Ø­ÙØ¸ Ø§ÛŒÙ† ÙˆØ¶Ø¹ÛŒØªØŒ Ø§Ø¯Ø§Ù…Ù‡ Ø³Ø¨Ú© Ø²Ù†Ø¯Ú¯ÛŒ Ù…ØªØ¹Ø§Ø¯Ù„ØŒ ØªØºØ°ÛŒÙ‡ Ù…Ù†Ø§Ø³Ø¨ Ùˆ ÙØ¹Ø§Ù„ÛŒØª Ø¨Ø¯Ù†ÛŒ Ù…Ù†Ø¸Ù… Ø§Ø³Øª. ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯ Ø§ÛŒÙ† Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø³Ø§Ù„Ù… Ø±Ø§ Ø­ÙØ¸ Ú©Ù†ÛŒØ¯.`;

        } else if (status.message.includes("Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù†") || status.message.includes("85 ØªØ§ 95 Ø¯Ø±ØµØ¯")) {
            explanation = `Ø´Ù…Ø§ Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù† Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±ÛŒØ¯. Ø¯Ø± Ø­Ø§Ù„ÛŒ Ú©Ù‡ Ø§ÛŒÙ† ÙˆØ¶Ø¹ÛŒØª Ù‡Ù†ÙˆØ² Ú†Ø§Ù‚ÛŒ Ù…Ø­Ø³ÙˆØ¨ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø§Ù…Ø§ Ø²Ù†Ú¯ Ù‡Ø´Ø¯Ø§Ø±ÛŒ Ø¬Ø¯ÛŒ Ø§Ø³Øª. Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù† Ø±ÛŒØ³Ú© Ø§Ø¨ØªÙ„Ø§ Ø¨Ù‡ Ø¯ÛŒØ§Ø¨Øª Ù†ÙˆØ¹ Û²ØŒ ÙØ´Ø§Ø± Ø®ÙˆÙ† Ùˆ Ø¨ÛŒÙ…Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‚Ù„Ø¨ÛŒ Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. Ø¨Ø§ ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ú©Ø§Ù‡Ø´ ØªØ¯Ø±ÛŒØ¬ÛŒ ÙˆØ²Ù† (Ûµ ØªØ§ Û±Û° Ø¯Ø±ØµØ¯ ÙˆØ²Ù† ÙØ¹Ù„ÛŒ) Ø§Ø² Ø·Ø±ÛŒÙ‚ Ú©Ù†ØªØ±Ù„ Ú©Ø§Ù„Ø±ÛŒ Ùˆ Ø§ÙØ²Ø§ÛŒØ´ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‡ÙˆØ§Ø²ÛŒØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ Ø³Ø§Ø¯Ú¯ÛŒ Ø¨Ù‡ Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø³Ø§Ù„Ù… Ø¨Ø§Ø²Ú¯Ø±Ø¯ÛŒØ¯.`;

        } else if (status.message.includes("Ú†Ø§Ù‚ÛŒ") || status.message.includes("Ø¨Ø§Ù„Ø§ÛŒ 95 Ø¯Ø±ØµØ¯")) {
            explanation = `Ø´Ù…Ø§ Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ú†Ø§Ù‚ÛŒ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±ÛŒØ¯. Ø§ÛŒÙ† ÙˆØ¶Ø¹ÛŒØª Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆØ¬Ù‡ Ù¾Ø²Ø´Ú©ÛŒ ÙÙˆØ±ÛŒ Ùˆ Ø¬Ø¯ÛŒ Ø¯Ø§Ø±Ø¯. Ú†Ø§Ù‚ÛŒ Ø¨Ø§ Ø±ÛŒØ³Ú© Ø¨Ø§Ù„Ø§ÛŒ Ø¨ÛŒÙ…Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø²Ù…Ù† Ù…Ø§Ù†Ù†Ø¯ Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ù‚Ù„Ø¨ÛŒØŒ Ø³Ú©ØªÙ‡ Ù…ØºØ²ÛŒ Ùˆ Ø¨Ø±Ø®ÛŒ Ø³Ø±Ø·Ø§Ù†â€ŒÙ‡Ø§ Ù‡Ù…Ø±Ø§Ù‡ Ø§Ø³Øª. ØªÙ†Ù‡Ø§ Ø±Ø§Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø§ÛŒÙ† ÙˆØ¶Ø¹ÛŒØªØŒ Ø´Ø±ÙˆØ¹ ÛŒÚ© Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¬Ø§Ù…Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ²Ù† ØªØ­Øª Ù†Ø¸Ø± Ù¾Ø²Ø´Ú© Ùˆ Ù…ØªØ®ØµØµ ØªØºØ°ÛŒÙ‡ Ø§Ø³Øª. Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§ÛŒØ¯ Ø´Ø§Ù…Ù„ ØªØºÛŒÛŒØ±Ø§Øª Ù¾Ø§ÛŒØ¯Ø§Ø± Ø¯Ø± Ø±Ú˜ÛŒÙ… ØºØ°Ø§ÛŒÛŒ Ùˆ ÙØ¹Ø§Ù„ÛŒØª Ø¨Ø¯Ù†ÛŒ Ø¨Ø§Ø´Ø¯.`;

        }
        return explanation;
    }

    // 4. ØªØ­Ù„ÛŒÙ„ BMI Ø¨Ø±Ø§ÛŒ Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„Ø§Ù† (Ø¨Ø§Ù„Ø§ÛŒ 20 Ø³Ø§Ù„)
    function analyzeAdultBMIStatus(bmi, age) {
        let status = { message: "", color: "", source: "" };

        if (bmi < 18.5) {
            status.message = "Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù†";
            status.color = "#ffc107"; // Yellow
        } else if (bmi >= 18.5 && bmi < 25) {
            status.message = "ÙˆØ²Ù† Ù†Ø±Ù…Ø§Ù„ Ùˆ Ø³Ø§Ù„Ù…";
            status.color = "#28a745"; // Green
        } else if (bmi >= 25 && bmi < 30) {
            status.message = "Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù†";
            status.color = "#fd7e14"; // Orange
        } else {
            status.message = "Ú†Ø§Ù‚ÛŒ (Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆØ¬Ù‡ Ù¾Ø²Ø´Ú©ÛŒ)";
            status.color = "#dc3545"; // Red
        }

        // Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø±Ø§ÛŒ Ø³Ø§Ù„Ù…Ù†Ø¯Ø§Ù†
        if (age >= 65 && bmi >= 25 && bmi < 27) {
            status.message = "ÙˆØ²Ù† Ù…Ù†Ø§Ø³Ø¨ (Ø¨Ø±Ø§ÛŒ Ø³Ø§Ù„Ù…Ù†Ø¯Ø§Ù†)";
            status.color = "#388E3C";
        }
        
        status.source = "Ø³Ø§Ø²Ù…Ø§Ù† Ø¨Ù‡Ø¯Ø§Ø´Øª Ø¬Ù‡Ø§Ù†ÛŒ (WHO)";
        return status;
    }

    // 5. ØªØ­Ù„ÛŒÙ„ BMI Ø¨Ø±Ø§ÛŒ Ú©ÙˆØ¯Ú©Ø§Ù† Ùˆ Ù†ÙˆØ¬ÙˆØ§Ù†Ø§Ù† (Ø²ÛŒØ± 20 Ø³Ø§Ù„)
    function analyzeChildBMIStatus(bmi, age) {
        let status = { message: "", color: "", source: "" };

        if (age < 2) {
            status.message = "Ù‡Ø´Ø¯Ø§Ø±: Ø²ÛŒØ± Û² Ø³Ø§Ù„";
            status.color = "#007bff";
            status.source = "Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ ØªØ®ØµØµÛŒ";
            return status;
        }

        // Ù…Ù†Ø·Ù‚ Percentile (ØªÙ‚Ø±ÛŒØ¨ÛŒ)
        if (bmi < 16) { 
             status.message = "Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù† (Ø²ÛŒØ± 5 Ø¯Ø±ØµØ¯)";
             status.color = "#ffc107";
        } else if (bmi >= 16 && bmi < 22) { 
             status.message = "ÙˆØ²Ù† Ø³Ø§Ù„Ù… (Ø¨ÛŒÙ† 5 ØªØ§ 85 Ø¯Ø±ØµØ¯)";
             status.color = "#28a745";
        } else if (bmi >= 22 && bmi < 25) { 
             status.message = "Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù† (Ø¨ÛŒÙ† 85 ØªØ§ 95 Ø¯Ø±ØµØ¯)";
             status.color = "#fd7e14";
        } else { 
             status.message = "Ú†Ø§Ù‚ÛŒ (Ø¨Ø§Ù„Ø§ÛŒ 95 Ø¯Ø±ØµØ¯)";
             status.color = "#dc3545";
        }

        status.source = "Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø±Ø´Ø¯ CDC/WHO (ØªÙ‚Ø±ÛŒØ¨)";
        return status;
    }

    // 6. ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ùˆ Ø¬Ø§Ù…Ø¹
    function calculateHealthMetrics() {
        // Ú¯Ø±ÙØªÙ† ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§
        const weight = parseFloat(document.getElementById('weight').value);
        const height = parseFloat(document.getElementById('height').value);
        const age = parseInt(document.getElementById('age').value);
        const gender = document.getElementById('gender').value; 
        const resultDiv = document.getElementById('result');

        // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
        if (!weight || !height || !age || gender === "") {
            resultDiv.style.backgroundColor = '#ffe0e0';
            resultDiv.style.borderColor = '#dc3545';
            resultDiv.innerHTML = '<p style="color: #dc3545; font-weight: bold; text-align: center;">âš ï¸ Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… Ú©Ø§Ø¯Ø±Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯.</p>';
            return;
        }
        
        // Ù…Ø­Ø§Ø³Ø¨Ø§Øª
        const bmi = calculateBMI(weight, height);
        const genderInt = parseInt(gender);

        let analysis;
        if (age >= 20) {
            analysis = analyzeAdultBMIStatus(bmi, age);
        } else {
            analysis = analyzeChildBMIStatus(bmi, age);
        }

        const bfp = getBodyFatPercentage(bmi, age, genderInt);
        
        // ØªØ®Ù…ÛŒÙ† ØªÙˆØ¯Ù‡ Ø¨Ø¯ÙˆÙ† Ú†Ø±Ø¨ÛŒ (LBM)
        const fatMass = (bfp / 100) * weight;
        const leanBodyMass = weight - fatMass;

        // ØªÙˆÙ„ÛŒØ¯ ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ø§Ù…Ù„ Ùˆ Ø§Ø®ØªØµØ§ØµÛŒ
        const explanationText = generateExplanation(analysis, age, genderInt, bmi);
        
        // Ø®Ø±ÙˆØ¬ÛŒ HTML
        let outputHTML = `
            <p class="bmi-value" style="color: ${analysis.color};">${bmi}</p>
            <p class="status-message" style="color: ${analysis.color};">ÙˆØ¶Ø¹ÛŒØª Ø´Ù…Ø§: ${analysis.message}</p>
            <p class="section-title">ğŸŒŸ Ù…Ø­Ø¯ÙˆØ¯Ù‡ BMI Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„</p>
            <ul class="estimation-list">
                <li>Ø§Ú¯Ø± Ø¨Ø§Ù„Ø§ÛŒ Û²Û° Ø³Ø§Ù„ Ù‡Ø³ØªÛŒØ¯: <span>Û±Û¸.Ûµ ØªØ§ Û²Ûµ</span></li>
                <li>ØªØ®Ù…ÛŒÙ† Ù…Ø±Ø¬Ø¹ ØªØ­Ù„ÛŒÙ„: <span>${analysis.source}</span></li>
            </ul>
        `;

        // Ù†Ù…Ø§ÛŒØ´ ØªØ®Ù…ÛŒÙ† ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†ÛŒ (Ø§Ú¯Ø± Ø³Ù† Ø²ÛŒØ± 2 Ø³Ø§Ù„ Ù†ÛŒØ³Øª)
        if (age >= 2) {
            outputHTML += `
                <p class="section-title">ğŸ“Š ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†ÛŒ (ØªØ®Ù…ÛŒÙ†)</p>
                <ul class="estimation-list">
                    <li>ØªÙˆØ¯Ù‡ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù†: <span>${fatMass.toFixed(1)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù… (${bfp}%)</span></li>
                    <li>ØªÙˆØ¯Ù‡ Ø¨Ø¯ÙˆÙ† Ú†Ø±Ø¨ÛŒ (Ø´Ø§Ù…Ù„ Ø¹Ø¶Ù„Ù‡ØŒ Ø¢Ø¨ Ùˆ Ø§Ø³ØªØ®ÙˆØ§Ù†): <span>${leanBodyMass.toFixed(1)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</span></li>
                </ul>
            `;
        }

        outputHTML += `
            <p class="explanation-text">${explanationText}</p>
            <p class="disclaimer">
            **Ù‡Ø´Ø¯Ø§Ø±:** Ø§ÛŒÙ† ÛŒÚ© ØªØ®Ù…ÛŒÙ† Ø¹Ù„Ù…ÛŒ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ Ø¯Ù‚ÛŒÙ‚ Ø³Ù„Ø§Ù…ØªÛŒ Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ø¨Ø±Ù†Ø§Ù…Ù‡ ØºØ°Ø§ÛŒÛŒØŒ Ø¨Ø§ Ù…ØªØ®ØµØµ Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯.
            </p>
        `;

        // Ø§Ø³ØªØ§ÛŒÙ„ Ú©Ø§Ø±Øª Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ
        resultDiv.style.backgroundColor = analysis.color + "15";
        resultDiv.style.borderColor = analysis.color;
        resultDiv.innerHTML = outputHTML;
    }
</script>

</body>
</html>
