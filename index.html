<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ BMI Ùˆ ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†ÛŒ</title>
    <style>
        body { font-family: Tahoma, sans-serif; background-color: #f0f2f5; padding: 15px; display: flex; justify-content: center; }
        .container { background-color: white; padding: 25px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); width: 100%; max-width: 380px; text-align: center; }
        h2 { color: #333; margin-bottom: 25px; border-bottom: 2px solid #ff6600; padding-bottom: 10px; }
        .input-group { text-align: right; margin-bottom: 15px; }
        label { display: block; font-size: 14px; color: #555; margin-bottom: 5px; }
        input, select {
            width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; 
            font-size: 16px; text-align: center; background-color: #fff;
        }
        button {
            width: 100%; padding: 14px; background-color: #ff6600; color: white; border: none; border-radius: 8px; 
            font-size: 17px; cursor: pointer; margin-top: 15px; transition: background-color 0.3s;
        }
        button:active { background-color: #e65c00; }
        #result { margin-top: 30px; text-align: right; padding: 15px; border-radius: 10px; line-height: 1.6; }
        .bmi-value { font-size: 30px; margin-bottom: 5px; font-weight: bold; }
        .status-message { font-size: 16px; font-weight: bold; margin-bottom: 15px; }
        .section-title { font-size: 15px; font-weight: bold; color: #ff6600; margin-top: 20px; border-bottom: 1px solid #eee; padding-bottom: 5px;}
        .estimation-list { list-style-type: none; padding: 0; margin-top: 10px; }
        .estimation-list li { margin-bottom: 5px; font-size: 14px; display: flex; justify-content: space-between; }
        .disclaimer { font-size: 12px; color: #888; margin-top: 20px; text-align: justify; }
    </style>
</head>
<body>

<div class="container">
    <h2>ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ BMI</h2>
    
    <div class="input-group">
        <label for="age">Ø³Ù†:</label>
        <input type="number" id="age" placeholder="Ù…Ø«Ù„Ø§Ù‹: 30" min="1" max="120">
    </div>

    <div class="input-group">
        <label for="gender">Ø¬Ù†Ø³ÛŒØª:</label>
        <select id="gender">
            <option value="">--- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ ---</option>
            <option value="1">Ø¢Ù‚Ø§</option>
            <option value="0">Ø®Ø§Ù†Ù…</option>
        </select>
    </div>
    
    <div class="input-group">
        <label for="weight">ÙˆØ²Ù† (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
        <input type="number" id="weight" placeholder="Ù…Ø«Ù„Ø§Ù‹: 75" min="1">
    </div>
    
    <div class="input-group">
        <label for="height">Ù‚Ø¯ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±):</label>
        <input type="number" id="height" placeholder="Ù…Ø«Ù„Ø§Ù‹: 170" min="1">
    </div>
    
    <button onclick="calculateHealthMetrics()">ğŸ”¬ ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹</button>
    
    <div id="result"></div>
</div>

<script>
    // 1. ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ BMI
    function calculateBMI(weight, height) {
        const heightInMeters = height / 100;
        return (weight / (heightInMeters * heightInMeters)).toFixed(1);
    }

    // 2. ØªØ§Ø¨Ø¹ ØªØ®Ù…ÛŒÙ† Ø¯Ø±ØµØ¯ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù† (Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÙØ±Ù…ÙˆÙ„ Deurenberg - Ø¨Ø± Ø§Ø³Ø§Ø³ BMIØŒ Ø³Ù† Ùˆ Ø¬Ù†Ø³ÛŒØª)
    function getBodyFatPercentage(bmi, age, gender) {
        // Gender: 1=Male, 0=Female
        // ÙØ±Ù…ÙˆÙ„: BFP = (1.20 * BMI) + (0.23 * Age) - (10.8 * Gender) - 5.4 
        // Ø¯Ø± Ø§ÛŒÙ† ÙØ±Ù…ÙˆÙ„ØŒ 10.8 Ø¨Ø±Ø§ÛŒ Ù…Ø±Ø¯Ø§Ù† (1) Ú©Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¨Ø±Ø§ÛŒ Ø²Ù†Ø§Ù† (0) Ú©Ù… Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.
        let bfp = (1.20 * parseFloat(bmi)) + (0.23 * age) - (10.8 * gender) - 5.4;
        return Math.max(0, bfp.toFixed(1)); // Ù…Ø·Ù…Ø¦Ù† Ù…ÛŒâ€ŒØ´ÙˆÛŒÙ… Ø¹Ø¯Ø¯ Ù…Ù†ÙÛŒ Ù†Ø´ÙˆØ¯
    }

    // 3. ØªØ§Ø¨Ø¹ ØªØ­Ù„ÛŒÙ„ ÙˆØ¶Ø¹ÛŒØª BMI Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³Ù†
    function analyzeBMIStatus(bmi, age) {
        let status = { message: "", color: "" };

        if (age < 20) {
            status.color = "#007bff";
            status.message = "Ø³Ù† Ø´Ù…Ø§ Ø²ÛŒØ± 20 Ø³Ø§Ù„ Ø§Ø³Øª. ØªØ­Ù„ÛŒÙ„ BMI Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ Ø¨Ø§ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø±Ø´Ø¯ Ùˆ Ù¾Ø²Ø´Ú© Ù…ØªØ®ØµØµ Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯.";
            return status;
        }

        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø±Ø§ÛŒ Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„Ø§Ù† 20 ØªØ§ 65 Ø³Ø§Ù„
        if (bmi < 18.5) {
            status.message = "Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù†";
            status.color = "#ffc107";
        } else if (bmi >= 18.5 && bmi < 25) {
            status.message = "ÙˆØ²Ù† Ù†Ø±Ù…Ø§Ù„ (Ø³Ø§Ù„Ù…)";
            status.color = "#28a745";
        } else if (bmi >= 25 && bmi < 30) {
            status.message = "Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù†";
            status.color = "#fd7e14";
        } else {
            status.message = "Ú†Ø§Ù‚ÛŒ";
            status.color = "#dc3545";
        }

        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ Ø§ÙØ±Ø§Ø¯ Ù…Ø³Ù† (Ø¨Ø§Ù„Ø§ÛŒ 65 Ø³Ø§Ù„)
        if (age >= 65 && bmi >= 25 && bmi < 27) {
            status.message = "ÙˆØ²Ù† Ø®ÙˆØ¨ (Ø¨Ø±Ø§ÛŒ Ø³Ø§Ù„Ù…Ù†Ø¯Ø§Ù†)";
            status.color = "#4CAF50"; // Ú©Ù…ÛŒ Ø³Ø¨Ø²ØªØ±
        }
        
        return status;
    }

    // 4. ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ùˆ Ø¬Ø§Ù…Ø¹
    function calculateHealthMetrics() {
        // Ú¯Ø±ÙØªÙ† ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§
        const weight = parseFloat(document.getElementById('weight').value);
        const height = parseFloat(document.getElementById('height').value);
        const age = parseInt(document.getElementById('age').value);
        const gender = document.getElementById('gender').value; // 1 ÛŒØ§ 0
        const resultDiv = document.getElementById('result');

        // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
        if (!weight || !height || !age || gender === "") {
            resultDiv.style.backgroundColor = '#ffe0e0';
            resultDiv.innerHTML = '<p style="color: #dc3545; font-weight: bold;">âš ï¸ Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… Ú©Ø§Ø¯Ø±Ù‡Ø§ÛŒ Ø³Ù†ØŒ Ø¬Ù†Ø³ÛŒØªØŒ ÙˆØ²Ù† Ùˆ Ù‚Ø¯ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯.</p>';
            return;
        }
        
        // --- Ù…Ø­Ø§Ø³Ø¨Ø§Øª ---
        const bmi = calculateBMI(weight, height);
        const bmiAnalysis = analyzeBMIStatus(bmi, age);
        const bfp = getBodyFatPercentage(bmi, age, parseInt(gender));
        
        // ØªØ®Ù…ÛŒÙ† ØªÙˆØ¯Ù‡ Ø¨Ø¯ÙˆÙ† Ú†Ø±Ø¨ÛŒ (LBM = Lean Body Mass)
        const fatMass = (bfp / 100) * weight;
        const leanBodyMass = weight - fatMass;
        
        // --- Ø®Ø±ÙˆØ¬ÛŒ ---
        let outputHTML = `
            <p class="bmi-value" style="color: ${bmiAnalysis.color};">${bmi}</p>
            <p class="status-message" style="color: ${bmiAnalysis.color};">ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ: ${bmiAnalysis.message}</p>
        `;

        // Ø§Ú¯Ø± ØªØ­Ù„ÛŒÙ„ BMI Ø¯Ø±Ø³Øª Ù†Ø¨ÙˆØ¯ØŒ ÙÙ‚Ø· Ù‡Ø´Ø¯Ø§Ø± Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¨Ø¯Ù‡
        if (age < 20) {
            outputHTML += `<p style="font-size:14px; color:#007bff; text-align:justify;">${bmiAnalysis.message}</p>`;
        } else {
             // Ø§Ú¯Ø± Ø¨Ø±Ø§ÛŒ Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„Ø§Ù† Ø¨ÙˆØ¯ØŒ ØªØ­Ù„ÛŒÙ„ Ú†Ø±Ø¨ÛŒ Ùˆ ØªÙˆØ¯Ù‡ Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†
            outputHTML += `
                <p class="section-title">ğŸ“Š ØªØ­Ù„ÛŒÙ„ ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†ÛŒ (ØªØ®Ù…ÛŒÙ†)</p>
                <ul class="estimation-list">
                    <li>Ø¯Ø±ØµØ¯ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù† (BFP): <span>${bfp}%</span></li>
                    <li>ØªÙˆØ¯Ù‡ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù†: <span>${fatMass.toFixed(1)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</span></li>
                    <li>ØªÙˆØ¯Ù‡ Ø¨Ø¯ÙˆÙ† Ú†Ø±Ø¨ÛŒ (Ø´Ø§Ù…Ù„ Ø¹Ø¶Ù„Ù‡/Ø§Ø³ØªØ®ÙˆØ§Ù†): <span>${leanBodyMass.toFixed(1)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</span></li>
                </ul>
            `;
        }

        outputHTML += `
            <p class="disclaimer">
            **ØªÙˆØ¶ÛŒØ­ ÙÙ†ÛŒ:** Ø¯Ø±ØµØ¯ Ú†Ø±Ø¨ÛŒ Ø¨Ø§ ÙØ±Ù…ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØªØ®Ù…ÛŒÙ†ÛŒ (Ù…Ø§Ù†Ù†Ø¯ Deurenberg) Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯Ù‡ Ùˆ ÛŒÚ© "ØªØ®Ù…ÛŒÙ†" Ø¹Ù„Ù…ÛŒ Ø§Ø³ØªØŒ Ù†Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø¯Ù‚ÛŒÙ‚. Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ù‚ÛŒÙ‚ ØªÙˆØ¯Ù‡ Ø§Ø³ØªØ®ÙˆØ§Ù† Ùˆ Ù…Ø§Ù‡ÛŒÚ†Ù‡ØŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø³Ú©Ù† ØªØ®ØµØµÛŒ Ø§Ø³Øª.
            </p>
        `;

        resultDiv.style.backgroundColor = bmiAnalysis.color + "20";
        resultDiv.innerHTML = outputHTML;
    }
</script>

</body>
</html>
