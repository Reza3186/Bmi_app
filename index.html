<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ BMI (Ú¯Ø±Ø§ÙÛŒÚ©ÛŒ)</title>
    <style>
        /* ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ØµÙ„ÛŒ Ùˆ ÙÙˆÙ†Øª */
        body { 
            font-family: Tahoma, sans-serif; 
            background-color: #f0f2f5; /* Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø±ÙˆØ´Ù† */
            padding: 15px; 
            display: flex; 
            flex-direction: column; /* Ø¨Ø±Ø§ÛŒ Ù‚Ø±Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø§Ù…Ø¶Ø§ Ø¯Ø± Ù¾Ø§ÛŒÛŒÙ† */
            align-items: center; 
            min-height: 100vh;
            margin: 0;
        }

        /* Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø§ØµÙ„ÛŒ Ø¨Ø§ Ø§Ø³ØªØ§ÛŒÙ„ Ù…Ø¯Ø±Ù† */
        .container { 
            background-color: white; 
            padding: 25px; 
            border-radius: 20px; 
            box-shadow: 8px 8px 15px rgba(0, 0, 0, 0.08), -8px -8px 15px rgba(255, 255, 255, 0.8); /* Ø³Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù†Ø±Ù… */
            width: 100%; 
            max-width: 380px; 
            text-align: center; 
            margin-bottom: 20px;
        }

        h2 { 
            color: #ff6600; /* Ø±Ù†Ú¯ Ø§ØµÙ„ÛŒ Ø§ÛŒØªØ§ */
            margin-bottom: 25px; 
            padding-bottom: 10px;
            font-size: 20px;
            font-weight: bold;
            letter-spacing: 0.5px;
        }

        /* Ú¯Ø±ÙˆÙ‡ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ */
        .input-group { 
            text-align: right; 
            margin-bottom: 15px; 
            position: relative;
        }
        
        label { 
            display: block; 
            font-size: 13px; 
            color: #555; 
            margin-bottom: 5px; 
            font-weight: 600;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ */
        input, select {
            width: 100%; 
            padding: 12px 10px 12px 40px; /* ÙØ¶Ø§ÛŒ Ø¨ÛŒØ´ØªØ± Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÚ©ÙˆÙ† */
            border: 1px solid #e0e0e0; 
            border-radius: 10px; 
            box-sizing: border-box; 
            font-size: 16px; 
            background-color: #f9f9f9;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.05); /* Ø³Ø§ÛŒÙ‡ Ø¯Ø§Ø®Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù‚ */
            transition: all 0.3s;
        }
        input:focus, select:focus {
            border-color: #ff6600;
            box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.1), 0 0 5px rgba(255, 102, 0, 0.3);
            background-color: white;
            outline: none;
        }
        
        /* Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ */
        .input-icon {
            position: absolute;
            left: 10px;
            top: 35px;
            font-size: 18px;
            color: #ff6600;
        }

        /* Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ¨Ø§ */
        button {
            width: 100%; 
            padding: 14px; 
            background-color: #ff6600; 
            color: white; 
            border: none; 
            border-radius: 10px; 
            font-size: 17px; 
            cursor: pointer; 
            margin-top: 20px;
            box-shadow: 4px 4px 10px rgba(255, 102, 0, 0.4); /* Ø³Ø§ÛŒÙ‡ Ù‚ÙˆÛŒâ€ŒØªØ± */
            transition: all 0.3s;
            font-weight: bold;
        }
        button:active { 
            background-color: #e65c00; 
            box-shadow: 1px 1px 5px rgba(255, 102, 0, 0.5);
            transform: translateY(2px);
        }

        /* Ø¨Ø®Ø´ Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬ */
        #result { 
            margin-top: 30px; 
            text-align: right; 
            padding: 20px; 
            border-radius: 15px; 
            line-height: 1.6;
            background-color: #f7f7f7;
            border: 2px solid; /* Ø±Ù†Ú¯ Ø§ÛŒÙ† Border Ø¯Ø± JS ØªØ¹ÛŒÛŒÙ† Ù…ÛŒâ€ŒØ´ÙˆØ¯ */
        }
        .bmi-value { 
            font-size: 32px; 
            margin-bottom: 5px; 
            font-weight: 900;
            text-align: center;
        }
        .status-message { 
            font-size: 17px; 
            font-weight: bold; 
            margin-bottom: 10px; 
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            text-align: center;
        }
        .section-title { 
            font-size: 14px; 
            font-weight: bold; 
            color: #333; 
            margin-top: 15px; 
            border-bottom: 1px dashed #ddd; 
            padding-bottom: 5px;
            text-align: center;
        }
        .estimation-list { 
            list-style-type: none; 
            padding: 0; 
            margin-top: 10px; 
        }
        .estimation-list li { 
            margin-bottom: 8px; 
            font-size: 13px; 
            display: flex; 
            justify-content: space-between; 
            background-color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
        }
        .disclaimer { 
            font-size: 11px; 
            color: #888; 
            margin-top: 20px; 
            text-align: justify; 
            padding-top: 10px; 
            border-top: 1px dashed #ccc; 
        }

        /* Ø§Ù…Ø¶Ø§ÛŒ Ù¾Ø§ÛŒÛŒÙ† ØµÙØ­Ù‡ */
        .signature {
            font-size: 11px;
            color: #999;
            margin-top: 15px;
            width: 100%;
            max-width: 380px;
            text-align: center;
            padding-bottom: 5px;
        }
        .signature a {
            color: #ff6600;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ”¬ ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†ÛŒ</h2>
    
    <div class="input-group">
        <label for="age">Ø³Ù†:</label>
        <input type="number" id="age" placeholder="Ù…Ø«Ù„Ø§Ù‹: 30" min="1" max="120">
        <span class="input-icon">ğŸ‚</span>
    </div>

    <div class="input-group">
        <label for="gender">Ø¬Ù†Ø³ÛŒØª:</label>
        <select id="gender">
            <option value="">--- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ ---</option>
            <option value="1">Ø¢Ù‚Ø§</option>
            <option value="0">Ø®Ø§Ù†Ù…</option>
        </select>
        <span class="input-icon">ğŸ‘¤</span>
    </div>
    
    <div class="input-group">
        <label for="weight">ÙˆØ²Ù† (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
        <input type="number" id="weight" placeholder="Ù…Ø«Ù„Ø§Ù‹: 75" min="1">
        <span class="input-icon">âš–ï¸</span>
    </div>
    
    <div class="input-group">
        <label for="height">Ù‚Ø¯ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±):</label>
        <input type="number" id="height" placeholder="Ù…Ø«Ù„Ø§Ù‹: 170" min="1">
        <span class="input-icon">ğŸ“</span>
    </div>
    
    <button onclick="calculateHealthMetrics()">ğŸ”¥ Ø´Ø±ÙˆØ¹ ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹</button>
    
    <div id="result"></div>
</div>

<div class="signature">
    ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· <a href="#">Reza Jahanshahi</a>
</div>


<script>
    // 1. ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ BMI
    function calculateBMI(weight, height) {
        const heightInMeters = height / 100;
        return (weight / (heightInMeters * heightInMeters)).toFixed(1);
    }

    // 2. ØªØ§Ø¨Ø¹ ØªØ®Ù…ÛŒÙ† Ø¯Ø±ØµØ¯ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù† (ÙØ±Ù…ÙˆÙ„ Deurenberg)
    function getBodyFatPercentage(bmi, age, gender) {
        // Gender: 1=Male (Ø¢Ù‚Ø§), 0=Female (Ø®Ø§Ù†Ù…)
        // BFP = (1.20 * BMI) + (0.23 * Age) - (10.8 * Gender) - 5.4 
        let bfp = (1.20 * parseFloat(bmi)) + (0.23 * age) - (10.8 * gender) - 5.4;
        return Math.max(0, bfp.toFixed(1));
    }

    // 3. ØªØ­Ù„ÛŒÙ„ BMI Ø¨Ø±Ø§ÛŒ Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„Ø§Ù† (Ø¨Ø§Ù„Ø§ÛŒ 20 Ø³Ø§Ù„)
    function analyzeAdultBMIStatus(bmi, age) {
        let status = { message: "", color: "", source: "" };

        if (bmi < 18.5) {
            status.message = "Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù†";
            status.color = "#ffc107"; 
        } else if (bmi >= 18.5 && bmi < 25) {
            status.message = "ÙˆØ²Ù† Ù†Ø±Ù…Ø§Ù„ Ùˆ Ø³Ø§Ù„Ù…";
            status.color = "#28a745"; 
        } else if (bmi >= 25 && bmi < 30) {
            status.message = "Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù†";
            status.color = "#fd7e14"; 
        } else {
            status.message = "Ú†Ø§Ù‚ÛŒ (Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆØ¬Ù‡ Ù¾Ø²Ø´Ú©ÛŒ)";
            status.color = "#dc3545"; 
        }

        if (age >= 65 && bmi >= 25 && bmi < 27) {
            status.message = "ÙˆØ²Ù† Ù…Ù†Ø§Ø³Ø¨ (Ø¨Ø±Ø§ÛŒ Ø³Ø§Ù„Ù…Ù†Ø¯Ø§Ù†)";
            status.color = "#388E3C"; 
        }
        
        status.source = "Ø³Ø§Ø²Ù…Ø§Ù† Ø¨Ù‡Ø¯Ø§Ø´Øª Ø¬Ù‡Ø§Ù†ÛŒ (WHO)";
        return status;
    }

    // 4. ØªØ­Ù„ÛŒÙ„ BMI Ø¨Ø±Ø§ÛŒ Ú©ÙˆØ¯Ú©Ø§Ù† Ùˆ Ù†ÙˆØ¬ÙˆØ§Ù†Ø§Ù† (Ø²ÛŒØ± 20 Ø³Ø§Ù„) - Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø±ØµØ¯Ù‡Ø§
    function analyzeChildBMIStatus(bmi, age) {
        let status = { message: "", color: "", source: "" };

        if (age < 2) {
            status.message = "Ø²ÛŒØ± Û² Ø³Ø§Ù„: ØªØ­Ù„ÛŒÙ„ BMI Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø³Ù†ØŒ ÙÙ‚Ø· Ø¨Ø§ÛŒØ¯ ØªÙˆØ³Ø· Ù¾Ø²Ø´Ú© Ø¨Ø§ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ ØªØ®ØµØµÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯.";
            status.color = "#007bff";
            status.source = "Ù‡Ø´Ø¯Ø§Ø± ØªØ®ØµØµÛŒ";
            return status;
        }

        // Ù…Ù†Ø·Ù‚ Percentile (ØªÙ‚Ø±ÛŒØ¨ÛŒ) - BMI-for-Age
        // Ù…Ù‚Ø§Ø¯ÛŒØ± Ø²ÛŒØ± Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù…Ù†Ø·Ù‚ Ú©Ø¯Ù†ÙˆÛŒØ³ÛŒ Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ØªÙ‚Ø±ÛŒØ¨ Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ø´ÙˆÙ†Ø¯
        if (bmi < 16) { 
             status.message = "Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù† (Ø²ÛŒØ± 5 Ø¯Ø±ØµØ¯)";
             status.color = "#ffc107";
        } else if (bmi >= 16 && bmi < 22) { 
             status.message = "ÙˆØ²Ù† Ø³Ø§Ù„Ù… (Ø¨ÛŒÙ† 5 ØªØ§ 85 Ø¯Ø±ØµØ¯)";
             status.color = "#28a745";
        } else if (bmi >= 22 && bmi < 25) { 
             status.message = "Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù† (Ø¨ÛŒÙ† 85 ØªØ§ 95 Ø¯Ø±ØµØ¯)";
             status.color = "#fd7e14";
        } else { 
             status.message = "Ú†Ø§Ù‚ÛŒ (Ø¨Ø§Ù„Ø§ÛŒ 95 Ø¯Ø±ØµØ¯)";
             status.color = "#dc3545";
        }

        status.source = "Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø±Ø´Ø¯ CDC/WHO (ØªÙ‚Ø±ÛŒØ¨)";
        return status;
    }

    // 5. ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ùˆ Ø¬Ø§Ù…Ø¹
    function calculateHealthMetrics() {
        const weight = parseFloat(document.getElementById('weight').value);
        const height = parseFloat(document.getElementById('height').value);
        const age = parseInt(document.getElementById('age').value);
        const gender = document.getElementById('gender').value; 
        const resultDiv = document.getElementById('result');

        // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
        if (!weight || !height || !age || gender === "") {
            resultDiv.style.backgroundColor = '#ffe0e0';
            resultDiv.style.borderColor = '#dc3545';
            resultDiv.innerHTML = '<p style="color: #dc3545; font-weight: bold; text-align: center;">âš ï¸ Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… Ú©Ø§Ø¯Ø±Ù‡Ø§ÛŒ Ø³Ù†ØŒ Ø¬Ù†Ø³ÛŒØªØŒ ÙˆØ²Ù† Ùˆ Ù‚Ø¯ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯.</p>';
            return;
        }
        
        // Ù…Ø­Ø§Ø³Ø¨Ø§Øª
        const bmi = calculateBMI(weight, height);
        const genderInt = parseInt(gender);

        let analysis;
        if (age >= 20) {
            analysis = analyzeAdultBMIStatus(bmi, age);
        } else {
            analysis = analyzeChildBMIStatus(bmi, age);
        }

        const bfp = getBodyFatPercentage(bmi, age, genderInt);
        
        // ØªØ®Ù…ÛŒÙ† ØªÙˆØ¯Ù‡ Ø¨Ø¯ÙˆÙ† Ú†Ø±Ø¨ÛŒ (LBM)
        const fatMass = (bfp / 100) * weight;
        const leanBodyMass = weight - fatMass;
        
        // Ø®Ø±ÙˆØ¬ÛŒ HTML
        let outputHTML = `
            <p class="bmi-value" style="color: ${analysis.color};">${bmi}</p>
            <p class="status-message" style="color: ${analysis.color};">ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ: ${analysis.message}</p>
            <p style="font-size:12px; color:#999; text-align:center;">Ù…Ø±Ø¬Ø¹ ØªØ­Ù„ÛŒÙ„: ${analysis.source}</p>
        `;

        // Ù†Ù…Ø§ÛŒØ´ ØªØ®Ù…ÛŒÙ† ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†ÛŒ (Ø§Ú¯Ø± Ø³Ù† Ø²ÛŒØ± 2 Ø³Ø§Ù„ Ù†ÛŒØ³Øª)
        if (age >= 2) {
            outputHTML += `
                <p class="section-title">âœ¨ ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†ÛŒ (ØªØ®Ù…ÛŒÙ† ÙˆØ²Ù†)</p>
                <ul class="estimation-list">
                    <li>ØªÙˆØ¯Ù‡ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù†: <span>${fatMass.toFixed(1)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù… (${bfp}%)</span></li>
                    <li>ØªÙˆØ¯Ù‡ Ø¨Ø¯ÙˆÙ† Ú†Ø±Ø¨ÛŒ (Ø¹Ø¶Ù„Ù‡ØŒ Ø¢Ø¨ØŒ Ø§Ø³ØªØ®ÙˆØ§Ù†): <span>${leanBodyMass.toFixed(1)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</span></li>
                </ul>
            `;
        }


        outputHTML += `
            <p class="disclaimer">
            **Ù‡Ø´Ø¯Ø§Ø± ØªØ®ØµØµÛŒ:** Ø§ÛŒÙ† ÛŒÚ© ØªØ®Ù…ÛŒÙ† Ø¹Ù„Ù…ÛŒ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ Ø¯Ù‚ÛŒÙ‚ Ø³Ù„Ø§Ù…ØªÛŒ Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ø¨Ø±Ù†Ø§Ù…Ù‡ ØºØ°Ø§ÛŒÛŒØŒ Ø¨Ø§ Ù…ØªØ®ØµØµ Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯.
            </p>
        `;

        // Ø§Ø³ØªØ§ÛŒÙ„ Ú©Ø§Ø±Øª Ù†ØªÛŒØ¬Ù‡
        resultDiv.style.backgroundColor = analysis.color + "15";
        resultDiv.style.borderColor = analysis.color;
        resultDiv.innerHTML = outputHTML;
    }
</script>

</body>
</html>
