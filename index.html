<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ BMI (ÙÙˆÙ‚ Ú¯Ø±Ø§ÙÛŒÚ©ÛŒ)</title>
    <style>
        /* --- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø§ÛŒÙ‡ --- */
        body { 
            font-family: Tahoma, sans-serif; 
            background-color: #f0f0f3; /* Ø±Ù†Ú¯ Ø²Ù…ÛŒÙ†Ù‡ Ù†Ø±Ù… Ùˆ Ø®Ù†Ø«ÛŒ */
            padding: 20px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh;
            margin: 0;
            color: #333;
        }

        /* --- Ø§Ø³ØªØ§ÛŒÙ„ Neumorphism Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù†ØªÛŒÙ†Ø± --- */
        .container { 
            background-color: #f0f0f3; 
            padding: 30px; 
            border-radius: 20px; 
            /* Ø³Ø§ÛŒÙ‡ Neumorphism Ø¹Ù…ÛŒÙ‚: Ù†ÙˆØ± Ø¨Ø§Ù„Ø§ Ùˆ Ø³Ø§ÛŒÙ‡ Ù¾Ø§ÛŒÛŒÙ† */
            box-shadow: 
                6px 6px 12px #bebebe, 
                -6px -6px 12px #ffffff; 
            width: 100%; 
            max-width: 380px; 
            text-align: center; 
            margin-bottom: 25px;
            transition: all 0.4s ease;
        }

        h2 { 
            color: #1e88e5; /* Ø¢Ø¨ÛŒ Ø¬Ø°Ø§Ø¨ */
            margin-bottom: 30px; 
            padding-bottom: 10px;
            font-size: 22px;
            font-weight: 900;
            border-bottom: 3px solid #ffab40; 
            letter-spacing: 0.5px;
        }

        /* --- ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ --- */
        .input-group { 
            text-align: right; 
            margin-bottom: 18px; 
            position: relative;
        }
        
        label { 
            display: block; 
            font-size: 13px; 
            color: #555; 
            margin-bottom: 5px; 
            font-weight: 600;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ Ø¨Ø§ ÙØ±Ùˆ Ø±ÙØªÚ¯ÛŒ Ù†Ø¦ÙˆÙ…ÙˆØ±ÙÛŒÚ© */
        input, select {
            width: 100%; 
            padding: 14px 15px 14px 40px; 
            border: none;
            border-radius: 10px; 
            box-sizing: border-box; 
            font-size: 16px; 
            background-color: #f0f0f3; 
            /* Ø³Ø§ÛŒÙ‡ Ø¯Ø§Ø®Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø­Ø³ ÙØ±Ùˆ Ø±ÙØªÚ¯ÛŒ */
            box-shadow: inset 3px 3px 5px #bebebe, inset -3px -3px 5px #ffffff; 
            transition: all 0.3s ease;
        }
        input:focus, select:focus {
            background-color: white;
            box-shadow: inset 1px 1px 2px #bebebe, inset -1px -1px 2px #ffffff;
            outline: 1px solid #1e88e5; /* Ø®Ø· Ø¢Ø¨ÛŒ Ø¯Ø± ÙÙˆÚ©ÙˆØ³ */
        }
        
        /* Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ */
        .input-icon {
            position: absolute;
            left: 10px;
            top: 40px;
            font-size: 18px;
            color: #ffab40;
        }

        /* --- Ø¯Ú©Ù…Ù‡ ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡ Ø²ÛŒØ¨Ø§ --- */
        button {
            width: 100%; 
            padding: 16px; 
            background-color: #ffab40; /* Ø±Ù†Ú¯ Ø§ØµÙ„ÛŒ Ø¯Ú©Ù…Ù‡ */
            color: white;
            border: none; 
            border-radius: 12px; 
            font-size: 18px; 
            cursor: pointer; 
            margin-top: 30px;
            /* Ø³Ø§ÛŒÙ‡ Ø¨Ø±Ø¬Ø³ØªÙ‡ Ù†Ø¦ÙˆÙ…ÙˆØ±ÙÛŒÚ© */
            box-shadow: 4px 4px 8px #bebebe, -4px -4px 8px #ffffff; 
            transition: all 0.2s ease;
            font-weight: bold;
        }
        /* Ø¬Ù„ÙˆÙ‡ ÙˆÛŒÚ˜Ù‡ Ù‡Ù†Ú¯Ø§Ù… Ú©Ù„ÛŒÚ© */
        button:active { 
            background-color: #ffa000; 
            transform: translateY(2px);
            box-shadow: 2px 2px 4px #bebebe, -2px -2px 4px #ffffff; /* ÙØ±Ùˆ Ø±ÙØªÚ¯ÛŒ Ù‡Ù†Ú¯Ø§Ù… Ú©Ù„ÛŒÚ© */
        }

        /* --- Ø¨Ø®Ø´ Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬ --- */
        #result { 
            margin-top: 35px; 
            text-align: right; 
            line-height: 1.7;
            width: 100%;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ (Ø¬Ø¯ÛŒØ¯) */
        .result-card {
            background-color: #f0f0f3;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 
                4px 4px 8px #bebebe, 
                -4px -4px 8px #ffffff; 
            border: 2px solid; /* Ø±Ù†Ú¯ Border Ø¯Ø± JS ØªØ¹ÛŒÛŒÙ† Ù…ÛŒâ€ŒØ´ÙˆØ¯ */
            transition: all 0.4s ease;
        }

        /* ÙˆØ¶Ø¹ÛŒØª Ùˆ Ø¹Ø¯Ø¯ BMI */
        .bmi-value { 
            font-size: 40px; 
            font-weight: 900;
            text-align: center;
            margin-bottom: 5px;
        }
        .status-message { 
            font-size: 18px; 
            font-weight: bold; 
            padding-bottom: 10px;
            border-bottom: 1px dashed #ccc;
            text-align: center;
        }
        
        /* ØªØ§ÛŒØªÙ„â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ú©Ø§Ø±Øª */
        .section-title { 
            font-size: 14px; 
            font-weight: bold; 
            color: #1e88e5; 
            margin-top: 15px; 
            padding: 5px 0;
            text-align: center;
            border-bottom: 1px dotted #ccc;
        }
        
        /* Ù„ÛŒØ³Øª ØªØ®Ù…ÛŒÙ†â€ŒÙ‡Ø§ */
        .estimation-list { 
            list-style-type: none; 
            padding: 0; 
            margin-top: 10px; 
        }
        .estimation-list li { 
            margin-bottom: 8px; 
            font-size: 14px; 
            display: flex; 
            justify-content: space-between; 
            background-color: #e8eaf6; /* Ø¨Ú©â€ŒÚ¯Ø±Ø§Ù†Ø¯ Ø¢Ø¨ÛŒ Ø±ÙˆØ´Ù† */
            padding: 8px 12px;
            border-radius: 8px;
            box-shadow: inset 1px 1px 3px rgba(0,0,0,0.05);
        }

        /* Ù…ØªÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¬Ø§Ù…Ø¹ */
        .explanation-text {
            font-size: 13px;
            text-align: justify;
            color: #444;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px dashed #ffab40; /* Ø®Ø· Ø¬Ø°Ø§Ø¨ */
        }

        /* Ø§Ù…Ø¶Ø§ */
        .signature {
            font-size: 12px;
            color: #777;
            margin-top: 15px;
            width: 100%;
            max-width: 380px;
            text-align: center;
            font-weight: 600;
        }
        .signature a {
            color: #1e88e5;
            text-decoration: none;
            font-weight: bold;
        }
        .disclaimer { /* Ø§Ø³ØªØ§ÛŒÙ„ Ù‡Ø´Ø¯Ø§Ø± */
            font-size: 11px; color: #888; margin-top: 20px; text-align: justify; padding-top: 10px; border-top: 1px dashed #ccc; 
        }
    </style>
</head>
<body>

<div class="container">
    <h2>âœ¨ ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹ Ùˆ Ø²ÛŒØ¨Ø§ÛŒÛŒâ€ŒØ´Ù†Ø§Ø®ØªÛŒ BMI</h2>
    
    <div class="input-group">
        <label for="age">Ø³Ù†:</label>
        <input type="number" id="age" placeholder="Ù…Ø«Ù„Ø§Ù‹: 30" min="1" max="120">
        <span class="input-icon">ğŸ‚</span>
    </div>

    <div class="input-group">
        <label for="gender">Ø¬Ù†Ø³ÛŒØª:</label>
        <select id="gender">
            <option value="">--- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ ---</option>
            <option value="1">Ø¢Ù‚Ø§</option>
            <option value="0">Ø®Ø§Ù†Ù…</option>
        </select>
        <span class="input-icon">ğŸ‘¤</span>
    </div>
    
    <div class="input-group">
        <label for="weight">ÙˆØ²Ù† (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
        <input type="number" id="weight" placeholder="Ù…Ø«Ù„Ø§Ù‹: 75" min="1">
        <span class="input-icon">âš–ï¸</span>
    </div>
    
    <div class="input-group">
        <label for="height">Ù‚Ø¯ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±):</label>
        <input type="number" id="height" placeholder="Ù…Ø«Ù„Ø§Ù‹: 170" min="1">
        <span class="input-icon">ğŸ“</span>
    </div>
    
    <button onclick="calculateHealthMetrics()">ğŸ”¥ Ø´Ø±ÙˆØ¹ ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹</button>
    
    <div id="result"></div>
</div>

<div class="signature">
    ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ Ø¨Ø§ Ø§ÙØªØ®Ø§Ø± ØªÙˆØ³Ø· <a href="#">Reza Jahanshahi</a>
</div>


<script>
    // 1. ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ BMI
    function calculateBMI(weight, height) {
        const heightInMeters = height / 100;
        return (weight / (heightInMeters * heightInMeters)).toFixed(1);
    }

    // 2. ØªØ§Ø¨Ø¹ ØªØ®Ù…ÛŒÙ† Ø¯Ø±ØµØ¯ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù† (ÙØ±Ù…ÙˆÙ„ Deurenberg)
    function getBodyFatPercentage(bmi, age, gender) {
        let bfp = (1.20 * parseFloat(bmi)) + (0.23 * age) - (10.8 * gender) - 5.4;
        return Math.max(0, bfp.toFixed(1));
    }

    // 3. ØªÙˆÙ„ÛŒØ¯ ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø®ØªØµØ§ØµÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± ÙˆØ¶Ø¹ÛŒØª
    function generateExplanation(status, age, gender, bmi) {
        const isMale = gender === 1;
        const idealRange = age >= 20 ? "Û±Û¸.Ûµ ØªØ§ Û²Ûµ" : "ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ù†Ù…ÙˆØ¯Ø§Ø± Ø±Ø´Ø¯";
        let explanation = "";

        if (age < 2) {
            return "Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ú© Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ Ú©ÙˆØ¯Ú©Ø§Ù† Ø²ÛŒØ± Û² Ø³Ø§Ù„ Ø·Ø±Ø§Ø­ÛŒ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø³Ù†ØŒ ØªÙ†Ù‡Ø§ Ù¾Ø²Ø´Ú© Ù…ØªØ®ØµØµ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ÙˆØ¶Ø¹ÛŒØª Ú©ÙˆØ¯Ú© Ø±Ø§ Ø¨Ø§ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ ØªØ®ØµØµÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†Ø¯.";
        }

        const isChild = age < 20;

        // --- ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…ÙØµÙ„ ---
        if (status.message.includes("Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù†") || status.message.includes("Ø²ÛŒØ± 5 Ø¯Ø±ØµØ¯")) {
            explanation = `${isChild ? 'ÙˆØ¶Ø¹ÛŒØª BMI Ø´Ù…Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø¯Ø§Ø±Ø¯.' : 'Ø´Ù…Ø§ Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù† Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±ÛŒØ¯.'} BMI Ù¾Ø§ÛŒÛŒÙ† (Ø²ÛŒØ± ${idealRange}) Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø³ÙˆØ¡ØªØºØ°ÛŒÙ‡ØŒ Ø¬Ø°Ø¨ Ù†Ø§Ú©Ø§ÙÛŒ Ù…ÙˆØ§Ø¯ Ù…ØºØ°ÛŒ ÛŒØ§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§ÙØ²Ø§ÛŒØ´ ØªÙˆØ¯Ù‡ Ø¹Ø¶Ù„Ø§Ù†ÛŒ Ø¨Ø§Ø´Ø¯. Ø§ÛŒÙ† ÙˆØ¶Ø¹ÛŒØªØŒ Ø¨Ù‡â€ŒÙˆÛŒÚ˜Ù‡ Ø¯Ø± Ø³Ù†ÛŒÙ† Ø±Ø´Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø±ÛŒØ³Ú©â€ŒÙ‡Ø§ÛŒ Ø³Ù„Ø§Ù…ØªÛŒ Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ù‡Ø¯. **Ø§Ù‚Ø¯Ø§Ù… Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ:** Ù…Ø´ÙˆØ±Øª Ø¨Ø§ Ù…ØªØ®ØµØµ ØªØºØ°ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ø¨Ø±Ù†Ø§Ù…Ù‡ ØºØ°Ø§ÛŒÛŒ Ù¾Ø±Ú©Ø§Ù„Ø±ÛŒ Ùˆ Ù…ØºØ°ÛŒ Ø¬Ù‡Øª Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø³Ø§Ù„Ù….`;
        
        } else if (status.message.includes("ÙˆØ²Ù† Ù†Ø±Ù…Ø§Ù„") || status.message.includes("Ø³Ø§Ù„Ù…")) {
            explanation = `ØªØ¨Ø±ÛŒÚ©! Ø´Ù…Ø§ Ø¯Ø± **Ù…Ø­Ø¯ÙˆØ¯Ù‡ ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ùˆ Ø³Ø§Ù„Ù…** Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±ÛŒØ¯. BMI Ø´Ù…Ø§ Ú©Ù…ØªØ±ÛŒÙ† Ø±ÛŒØ³Ú© Ø§Ø¨ØªÙ„Ø§ Ø¨Ù‡ Ø¨ÛŒÙ…Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ ÙˆØ²Ù† Ø±Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. Ø­ÙØ¸ Ø§ÛŒÙ† ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§ Ø§Ø¯Ø§Ù…Ù‡ Ø±Ú˜ÛŒÙ… ØºØ°Ø§ÛŒÛŒ Ù…ØªØ¹Ø§Ø¯Ù„ Ùˆ ÙˆØ±Ø²Ø´ØŒ ØªØ¶Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø³Ù„Ø§Ù…Øª Ø·ÙˆÙ„Ø§Ù†ÛŒâ€ŒÙ…Ø¯Øª Ø´Ù…Ø§Ø³Øª. **Ø§Ù‚Ø¯Ø§Ù… Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ:** Ø­ÙØ¸ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ùˆ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ù†Ø³Ø¨Øª Ú†Ø±Ø¨ÛŒ Ø¨Ù‡ Ø¹Ø¶Ù„Ù‡.`;

        } else if (status.message.includes("Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù†") || status.message.includes("85 ØªØ§ 95 Ø¯Ø±ØµØ¯")) {
            explanation = `${isChild ? 'Ø´Ù…Ø§ Ø¯Ø± Ù…Ø¹Ø±Ø¶ Ø®Ø·Ø± Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù† Ù‡Ø³ØªÛŒØ¯.' : 'Ø´Ù…Ø§ Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù† Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±ÛŒØ¯.'} Ø§ÛŒÙ† ÙˆØ¶Ø¹ÛŒØª ÛŒÚ© Ø²Ù†Ú¯ Ø®Ø·Ø± Ø¬Ø¯ÛŒ Ù…Ø­Ø³ÙˆØ¨ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø±ÛŒØ³Ú© Ø¨ÛŒÙ…Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‚Ù„Ø¨ÛŒ-Ø¹Ø±ÙˆÙ‚ÛŒ Ùˆ Ø¯ÛŒØ§Ø¨Øª Ù†ÙˆØ¹ Û² Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. **Ø§Ù‚Ø¯Ø§Ù… Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ:** ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ú©Ø§Ù‡Ø´ Ûµ ØªØ§ Û±Û° Ø¯Ø±ØµØ¯ÛŒ ÙˆØ²Ù† Ø¨Ø¯Ù† Ø§Ø² Ø·Ø±ÛŒÙ‚ Ú©Ù†ØªØ±Ù„ Ø³Ù‡Ù… ØºØ°Ø§ÛŒÛŒØŒ Ú©Ø§Ù‡Ø´ Ù…ØµØ±Ù Ù‚Ù†Ø¯ Ùˆ Ú†Ø±Ø¨ÛŒâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ø³Ø§Ù„Ù… Ùˆ Ø§ÙØ²Ø§ÛŒØ´ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡.`;

        } else if (status.message.includes("Ú†Ø§Ù‚ÛŒ") || status.message.includes("Ø¨Ø§Ù„Ø§ÛŒ 95 Ø¯Ø±ØµØ¯")) {
            explanation = `${isChild ? 'Ø´Ù…Ø§ Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ú†Ø§Ù‚ÛŒ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±ÛŒØ¯.' : 'ÙˆØ¶Ø¹ÛŒØª Ø´Ù…Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆØ¬Ù‡ ÙÙˆØ±ÛŒ Ù¾Ø²Ø´Ú©ÛŒ Ø¯Ø§Ø±Ø¯.'} Ú†Ø§Ù‚ÛŒ Ø¨Ø§ Ø±ÛŒØ³Ú© Ø¨Ø³ÛŒØ§Ø± Ø¨Ø§Ù„Ø§ÛŒ Ø¨ÛŒÙ…Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø²Ù…Ù† Ùˆ Ù…Ø´Ú©Ù„Ø§Øª Ø­Ø±Ú©ØªÛŒ Ù‡Ù…Ø±Ø§Ù‡ Ø§Ø³Øª. **Ø§Ù‚Ø¯Ø§Ù… Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ:** Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¨Ø¯ÙˆÙ† ØªØ£Ø®ÛŒØ± Ø¨Ø§ Ù¾Ø²Ø´Ú©ØŒ Ù…ØªØ®ØµØµ ØºØ¯Ø¯ Ùˆ Ù…ØªØ®ØµØµ ØªØºØ°ÛŒÙ‡ Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯ ØªØ§ ÛŒÚ© Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¬Ø§Ù…Ø¹ Ùˆ Ø¯Ø±Ù…Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ùˆ Ú©Ø§Ù‡Ø´ ÙˆØ²Ù† Ø·Ø±Ø§Ø­ÛŒ Ø´ÙˆØ¯.`;

        }
        return explanation;
    }

    // 5. ØªØ­Ù„ÛŒÙ„ BMI Ø¨Ø±Ø§ÛŒ Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„Ø§Ù† Ùˆ Ù†ÙˆØ¬ÙˆØ§Ù†Ø§Ù† (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¯Ø± Ù…Ù†Ø·Ù‚)
    function analyzeAdultBMIStatus(bmi, age) {
        let status = { message: "", color: "", source: "" };
        if (bmi < 18.5) { status.message = "Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù†"; status.color = "#ffc107"; } else if (bmi >= 18.5 && bmi < 25) { status.message = "ÙˆØ²Ù† Ù†Ø±Ù…Ø§Ù„ Ùˆ Ø³Ø§Ù„Ù…"; status.color = "#28a745"; } else if (bmi >= 25 && bmi < 30) { status.message = "Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù†"; status.color = "#fd7e14"; } else { status.message = "Ú†Ø§Ù‚ÛŒ (Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆØ¬Ù‡ Ù¾Ø²Ø´Ú©ÛŒ)"; status.color = "#dc3545"; }
        if (age >= 65 && bmi >= 25 && bmi < 27) { status.message = "ÙˆØ²Ù† Ù…Ù†Ø§Ø³Ø¨ (Ø¨Ø±Ø§ÛŒ Ø³Ø§Ù„Ù…Ù†Ø¯Ø§Ù†)"; status.color = "#388E3C"; }
        status.source = "Ø³Ø§Ø²Ù…Ø§Ù† Ø¨Ù‡Ø¯Ø§Ø´Øª Ø¬Ù‡Ø§Ù†ÛŒ (WHO)";
        return status;
    }
    function analyzeChildBMIStatus(bmi, age) {
        let status = { message: "", color: "", source: "" };
        if (age < 2) { status.message = "Ù‡Ø´Ø¯Ø§Ø±: Ø²ÛŒØ± Û² Ø³Ø§Ù„"; status.color = "#007bff"; status.source = "Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ ØªØ®ØµØµÛŒ"; return status; }
        if (bmi < 16) { status.message = "Ú©Ù…Ø¨ÙˆØ¯ ÙˆØ²Ù† (Ø²ÛŒØ± 5 Ø¯Ø±ØµØ¯)"; status.color = "#ffc107"; } else if (bmi >= 16 && bmi < 22) { status.message = "ÙˆØ²Ù† Ø³Ø§Ù„Ù… (Ø¨ÛŒÙ† 5 ØªØ§ 85 Ø¯Ø±ØµØ¯)"; status.color = "#28a745"; } else if (bmi >= 22 && bmi < 25) { status.message = "Ø§Ø¶Ø§ÙÙ‡ ÙˆØ²Ù† (Ø¨ÛŒÙ† 85 ØªØ§ 95 Ø¯Ø±ØµØ¯)"; status.color = "#fd7e14"; } else { status.message = "Ú†Ø§Ù‚ÛŒ (Ø¨Ø§Ù„Ø§ÛŒ 95 Ø¯Ø±ØµØ¯)"; status.color = "#dc3545"; }
        status.source = "Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø±Ø´Ø¯ CDC/WHO (ØªÙ‚Ø±ÛŒØ¨)";
        return status;
    }

    // 6. ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ùˆ Ø¬Ø§Ù…Ø¹
    function calculateHealthMetrics() {
        const weight = parseFloat(document.getElementById('weight').value);
        const height = parseFloat(document.getElementById('height').value);
        const age = parseInt(document.getElementById('age').value);
        const gender = document.getElementById('gender').value; 
        const resultDiv = document.getElementById('result');

        if (!weight || !height || !age || gender === "") {
            resultDiv.innerHTML = '<div class="result-card" style="border-color:#dc3545;"><p style="color: #dc3545; font-weight: bold; text-align: center;">âš ï¸ Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… Ú©Ø§Ø¯Ø±Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯.</p></div>';
            return;
        }
        
        const bmi = calculateBMI(weight, height);
        const genderInt = parseInt(gender);

        let analysis;
        if (age >= 20) { analysis = analyzeAdultBMIStatus(bmi, age); } else { analysis = analyzeChildBMIStatus(bmi, age); }

        const bfp = getBodyFatPercentage(bmi, age, genderInt);
        const fatMass = (bfp / 100) * weight;
        const leanBodyMass = weight - fatMass;

        const explanationText = generateExplanation(analysis, age, genderInt, bmi);
        
        // --- Ø®Ø±ÙˆØ¬ÛŒ HTML Ø¨Ø§ Ø³Ø§Ø®ØªØ§Ø± Ú©Ø§Ø±Øª ---
        let outputHTML = `
            <div class="result-card" style="border-color: ${analysis.color};">
                <p class="bmi-value" style="color: ${analysis.color};">${bmi}</p>
                <p class="status-message" style="color: ${analysis.color};">ÙˆØ¶Ø¹ÛŒØª Ù†Ù‡Ø§ÛŒÛŒ: ${analysis.message}</p>
                
                <p class="section-title">ğŸŒŸ Ù…Ø­Ø¯ÙˆØ¯Ù‡ BMI Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ùˆ Ù…Ø±Ø¬Ø¹</p>
                <ul class="estimation-list">
                    <li>Ø§Ú¯Ø± Ø¨Ø§Ù„Ø§ÛŒ Û²Û° Ø³Ø§Ù„ Ù‡Ø³ØªÛŒØ¯: <span>Û±Û¸.Ûµ ØªØ§ Û²Ûµ</span></li>
                    <li>ØªØ®Ù…ÛŒÙ† Ù…Ø±Ø¬Ø¹ ØªØ­Ù„ÛŒÙ„: <span>${analysis.source}</span></li>
                </ul>
            </div>
            
            <div class="result-card">
                ${age >= 2 ? `
                    <p class="section-title">ğŸ“Š ØªØ­Ù„ÛŒÙ„ ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†ÛŒ (ØªØ®Ù…ÛŒÙ†)</p>
                    <ul class="estimation-list">
                        <li>ØªÙˆØ¯Ù‡ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù†: <span>${fatMass.toFixed(1)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù… (${bfp}%)</span></li>
                        <li>ØªÙˆØ¯Ù‡ Ø¨Ø¯ÙˆÙ† Ú†Ø±Ø¨ÛŒ (Ø´Ø§Ù…Ù„ Ø¹Ø¶Ù„Ù‡ØŒ Ø¢Ø¨ Ùˆ Ø§Ø³ØªØ®ÙˆØ§Ù†): <span>${leanBodyMass.toFixed(1)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</span></li>
                    </ul>` : ''}

                <p class="explanation-text">${explanationText}</p>
                <p class="disclaimer">
                **Ù‡Ø´Ø¯Ø§Ø±:** Ø§ÛŒÙ† ÛŒÚ© ØªØ®Ù…ÛŒÙ† Ø¹Ù„Ù…ÛŒ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ Ø¯Ù‚ÛŒÙ‚ Ø³Ù„Ø§Ù…ØªÛŒ Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ø¨Ø±Ù†Ø§Ù…Ù‡ ØºØ°Ø§ÛŒÛŒØŒ Ø¨Ø§ Ù…ØªØ®ØµØµ Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯.
                </p>
            </div>
        `;

        resultDiv.innerHTML = outputHTML;
    }
</script>

</body>
</html>
